<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Логін</title>
    <link rel="stylesheet" href="../css/utils.css">
    <link rel="stylesheet" href="../css/login.css">
</head>

<body>
    <header>
        <div>
            <h1><a href="./main_page.html">politechblog.online</a></h1>
        </div>
        <div id="tags">
            <div>
                <p>Новини <em id="newsEm">10</em></p>
            </div>
            <div>
                <p>Блоги <em id="blogsEm">5</em></п>
            </div>
            <div>
                <п>Допомога <em id="helpEm">3</em></п>
            </div>
        </div>
        <div>
            <input type="button" value="Додати новину" />
            <input type="button" value="Логін" />
        </div>
    </header>
    <section id="mainBodySection">
        <div id="form">
            <form id="loginForm">
                <label for="login">Логін</label>
                <input type="text" id="login" name="login">

                <label for="password">Пароль</label>
                <input type="password" id="password" name="password">

                <input type="button" value="Увійти" id="submit">
                <a href="./register.html" id="registration">Немає акаунту? Реєстрація</a>
            </form>
        </div>
    </section>
    <footer>
        <h4>politechblog.online &#169 Hudymenko Yevhenii, Martsin Andriy</h4>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var submitButton = document.getElementById('submit');
            submitButton.addEventListener('click', function() {
                var loginInput = document.getElementById('login').value;
                var passwordInput = document.getElementById('password').value;

                // Виконати запит до сервера для перевірки даних
                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/login', true);
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === XMLHttpRequest.DONE) {
                        if (xhr.status === 200) {
                            var response = JSON.parse(xhr.responseText);
                            if (response.success) {
                                alert('Логін успішний!');
                                // Перенаправлення на іншу сторінку або виконання інших дій
                                window.location.href = './public/html/main_page.html'; // Перенаправлення на головну сторінку
                            } else {
                                alert('Неправильний логін або пароль.');
                            }
                        } else {
                            alert('Помилка сервера: ' + xhr.status);
                        }
                    }
                };
                xhr.send(JSON.stringify({ login: loginInput, password: passwordInput }));
            });
        });
    </script>
</body>

</html>
